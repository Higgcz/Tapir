//
//  TSLPlan.m
//  TapirApplication
//
//  Created by Vojtech Micka on 10.05.14.
//  Copyright (c) 2014 Vojtech Micka. All rights reserved.
//

#import "TSLPlan.h"

#define NIL [NSNull null]

@interface TSLPlan ()

@property (nonatomic, strong) NSMutableArray *plan;
@property (nonatomic) NSInteger currentIndex;

@end

@implementation TSLPlan

////////////////////////////////////////////////////////////////////////////////////////////////
- (instancetype) init
////////////////////////////////////////////////////////////////////////////////////////////////
{
    self = [super init];
    if (self) {
        self.plan = [NSMutableArray array];
        self.currentIndex = -1;
    }
    return self;
}

////////////////////////////////////////////////////////////////////////////////////////////////
+ (instancetype) plan
////////////////////////////////////////////////////////////////////////////////////////////////
{
    return [[TSLPlan alloc] init];
}

////////////////////////////////////////////////////////////////////////////////////////////////
+ (instancetype) planFromRoadObject:(TSLZone *) start toRoadObject:(TSLZone *) target
////////////////////////////////////////////////////////////////////////////////////////////////
{
    TSLPlan *plan = [TSLPlan plan];
    [plan searchPathFromRoadObject:start toRoadObject:target];
    return plan;
}

////////////////////////////////////////////////////////////////////////////////////////////////
- (TSLRoad *) moveNext
////////////////////////////////////////////////////////////////////////////////////////////////
{
    self.currentIndex++;
    
    self.current  = self.plan [self.currentIndex];
    
    if (self.currentIndex + 1 < self.plan.count) {
        self.nextRoad = self.plan [self.currentIndex + 1];
    } else {
        self.nextRoad = nil;
    }
    
    return self.current;
}

////////////////////////////////////////////////////////////////////////////////////////////////
- (void) addRoad:(TSLRoad *) road
////////////////////////////////////////////////////////////////////////////////////////////////
{
    [self.plan addObject:road];
}

////////////////////////////////////////////////////////////////////////////////////////////////
- (void) searchPathFromRoadObject:(TSLZone *) start toRoadObject:(TSLZone *) target
////////////////////////////////////////////////////////////////////////////////////////////////
{
    
}

@end
